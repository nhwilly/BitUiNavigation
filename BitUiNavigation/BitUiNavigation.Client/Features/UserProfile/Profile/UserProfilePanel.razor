@inherits ModalPanelBase<UserProfileViewModel>
<SkeletonWhileBusy IsBusy="@(UserModalState.IsLoading)">
    <EditForm @ref="editForm" Model="@Model">
        <FluentValidationValidator />
        <BitGrid Columns="2" HorizontalSpacing="1rem" VerticalSpacing="0.5rem" Style="grid-template-columns:150px 1fr;">
            <BitGridItem>
                <BitText>First name</BitText>
            </BitGridItem>
            <BitGridItem>
                <BitTextField @bind-Value="Model.FirstName" IsEnabled="@IsEnabled" />
                <ValidationMessage For="() => Model.FirstName" />
            </BitGridItem>

            <BitGridItem>
                <BitText>Last name</BitText>
            </BitGridItem>
            <BitGridItem>
                <BitTextField @bind-Value="Model.LastName" Trim IsEnabled="@IsEnabled" />
                <ValidationMessage For="() => Model.LastName" />
            </BitGridItem>
        </BitGrid>
    </EditForm>
</SkeletonWhileBusy>
@code {
    private UserModalState UserModalState => GetState<UserModalState>();
    protected override UserProfileViewModel Model => UserModalState.ProfileVm;
    private bool IsDisabled => UserModalState.IsSaving;
    private bool IsEnabled => !IsDisabled;
}
