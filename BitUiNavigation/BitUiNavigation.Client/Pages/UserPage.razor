@page "/user/{*path}"
@using BitUiNavigation.Client.Layout
@inject NavigationManager Nav

<BitModal IsOpen="true"
          OnOverlayClick="HandleModalClose"
          OnDismiss="HandleModalClose"
          Style="width: 800px; height: 600px;">

    <div style="display: flex; height: 100%;">
        <BitNav Items="@DialogNavItems"
                Style="width: 200px; border-right: 1px solid #ccc;" />

        <div style="flex: 1; padding: 1rem;">
            <Router AppAssembly="@typeof(Program).Assembly">
                <Found Context="routeData">
                    <RouteView RouteData="@routeData" DefaultLayout="@typeof(EmptyLayout)" />
                </Found>
                <NotFound>
                    <p>Page not found in modal</p>
                </NotFound>
            </Router>
        </div>
    </div>
</BitModal>

@code {
    private void HandleModalClose()
    {
        // Navigate away to close the modal
        Nav.NavigateTo("/", forceLoad: false); // or your desired fallback route
    }

    private List<BitNavItem> DialogNavItems => new()
    {
        new() { Text = "Memberships", Key = "settings", Url = "/user/memberships" },
        new() { Text = "Profile", Key = "profile", Url= "/user/profile" }
    };
}
