@inherits TimeWarpStateComponent
@using Bit.BlazorUI
@using BitUiNavigation.Client.Services

<BitStack FitWidth Horizontal Gap="0rem;"AutoHeight VerticalAlign="BitAlignment.Center">
    <BitText>
        @StatusText
    </BitText>
</BitStack>
@code {

    private ModalHostState ModalHostState => GetState<ModalHostState>();

    private string StatusText =>
        ModalHostState.IsSaving ? "Saving..."
        : ModalHostState.IsSaved ? "Saved"
        : ModalHostState.IsChanged ? "Unsaved changes"
        : ModalHostState.IsFetching ? "Fetching..."
        : string.Empty;

    private RenderFragment? StatusIcon => ModalHostState switch
    {
        { IsSaving: true } => @<BitIcon IconName="Sync" />,
        { IsSaved: true } => @<BitIcon IconName="CheckMark" />,
        { IsChanged: true } => @<BitIcon IconName="Edit" />,
        { IsFetching: true } => @<BitIcon Style="margin: 0px; padding:0px;" IconName="@BitIconName.Process" />,
    _ => @<BitIcon/>
    };
    /*
     * buttons to save, discard, see what changed
     * indicator for saving
     * indicator for loading
     * indicator for save complete
     */
}
