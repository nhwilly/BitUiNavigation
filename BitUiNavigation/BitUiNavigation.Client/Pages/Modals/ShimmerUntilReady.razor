@inherits TimeWarpStateComponent
@using BitUiNavigation.Client.Services

<BitMediaQuery ScreenQuery="@BitScreenQuery.LtSm"
               OnChange="(isSmall) => IsSmallScreen = isSmall" />

@if (ShowLoading)
{
    if (LoadingContent is not null)
    {
        @LoadingContent
    }
    else
    {
        <Shimmer Sections="@Sections" LinesPerSection="@LinesPerSection" />
    }
}
else
{
    <CascadingValue TValue="bool" Value="IsSmallScreen">
        @ChildContent
    </CascadingValue>
}
@code {
    [Parameter, EditorRequired] public bool IsReady { get; set; }
    [Parameter, EditorRequired] public RenderFragment ChildContent { get; set; } = default!;
    [Parameter] public RenderFragment? LoadingContent { get; set; }
    [Parameter] public int Sections { get; set; } = 3;
    [Parameter] public int LinesPerSection { get; set; } = 4;
    protected bool IsSmallScreen { get; set; }
    private ModalHostState ModalHostState => GetState<ModalHostState>
();
    private bool ShowLoading => !IsReady || ModalHostState.IsFetching;

}
